{% comment %}
Componente de tabla responsiva reutilizable

Uso:
{% include 'components/responsive_table.html' with table_id='mi-tabla' headers=headers rows=rows mobile_fields=mobile_fields %}

Parámetros:
- table_id: ID único para la tabla
- headers: Lista de headers para la tabla desktop
- rows: Lista de filas con datos
- mobile_fields: Lista de campos a mostrar en vista móvil
- actions: Template para acciones (opcional)
- empty_message: Mensaje cuando no hay datos (opcional)
{% endcomment %}

<div class="bg-white rounded-xl shadow-lg overflow-hidden">
    {% if rows %}
        <!-- Vista de tabla para desktop -->
        <div class="hidden lg:block overflow-x-auto">
            <table class="w-full" id="{{ table_id|default:'responsive-table' }}">
                <thead class="bg-gray-50">
                    <tr>
                        {% for header in headers %}
                        <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">{{ header }}</th>
                        {% endfor %}
                        {% if actions %}
                        <th class="px-6 py-4 text-left text-sm font-semibold text-gray-900">Acciones</th>
                        {% endif %}
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                    {% for row in rows %}
                    <tr class="hover:bg-gray-50">
                        {% for cell in row.cells %}
                        <td class="px-6 py-4 text-sm {{ cell.class|default:'text-gray-900' }}">
                            {{ cell.content|safe }}
                        </td>
                        {% endfor %}
                        {% if actions %}
                        <td class="px-6 py-4 text-sm">
                            {% include actions with item=row.item %}
                        </td>
                        {% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <!-- Vista de cards para móvil y tablet -->
        <div class="lg:hidden divide-y divide-gray-200">
            {% for row in rows %}
            <div class="p-4 hover:bg-gray-50">
                <div class="space-y-2">
                    {% for field in mobile_fields %}
                    <div class="flex justify-between items-start">
                        <span class="text-sm font-medium text-gray-600">{{ field.label }}:</span>
                        <span class="text-sm text-gray-900 text-right ml-2">
                            {{ field.value|safe }}
                        </span>
                    </div>
                    {% endfor %}
                    
                    {% if actions %}
                    <div class="flex justify-end pt-2 border-t border-gray-100">
                        {% include actions with item=row.item %}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="p-12 text-center text-gray-500">
            <i class="fas fa-inbox text-4xl mb-4 text-gray-300"></i>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">{{ empty_title|default:"No hay datos disponibles" }}</h3>
            <p class="text-gray-600">{{ empty_message|default:"No se encontraron registros para mostrar" }}</p>
            {% if empty_action %}
            <div class="mt-6">
                {{ empty_action|safe }}
            </div>
            {% endif %}
        </div>
    {% endif %}
</div>

{% comment %}
Ejemplo de uso en una vista:

# En la vista
context = {
    'headers': ['DNI', 'Nombre', 'Teléfono', 'Estado'],
    'rows': [
        {
            'cells': [
                {'content': '12345678'},
                {'content': 'Juan Pérez'},
                {'content': '123-456-7890'},
                {'content': '<span class="badge-green">Activo</span>', 'class': ''}
            ],
            'item': ciudadano_obj
        }
    ],
    'mobile_fields': [
        {'label': 'DNI', 'value': '12345678'},
        {'label': 'Nombre', 'value': 'Juan Pérez'},
        {'label': 'Teléfono', 'value': '123-456-7890'},
        {'label': 'Estado', 'value': '<span class="badge-green">Activo</span>'}
    ]
}

# En el template
{% include 'components/responsive_table.html' with table_id='ciudadanos-table' headers=headers rows=rows mobile_fields=mobile_fields actions='components/ciudadano_actions.html' %}
{% endcomment %}